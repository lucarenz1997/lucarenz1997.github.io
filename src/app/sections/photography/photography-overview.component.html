<section class="photos-overview wide">
  <!-- HERO -->
  <div class="photos-hero">
    <div class="photos-hero-overlay">
      <h1>{{ 'photography.title' | translate }}</h1>
      <p>{{ 'photography.subtitle' | translate }}</p>
    </div>
  </div>

  <!-- ALBUMS TITLE + SUBTITLE -->
  <div class="photos-section-header">
    <h2>{{ 'photography.album.title' | translate }}</h2>
    <p>{{ 'photography.album.subtitle' | translate }}</p>
  </div>

  <!-- ALBUMS GRID -->
  <div class="albums-grid">
    <a
      *ngFor="let album of albums"
      class="album-card"
      [routerLink]="['/photography', album.id]"
    >
      <div class="album-cover">
        <img
          [src]="album.coverSrc"
          [alt]="album.titleKey | translate"
          loading="lazy"
        />
        <div class="album-cover-overlay">
          <h2>{{ album.titleKey | translate }}</h2>
          <p class="album-meta">
            <ng-container *ngIf="album.location">
              {{ album.location }}
            </ng-container>
            <ng-container *ngIf="album.location && album.year">
              ·
            </ng-container>
            <ng-container *ngIf="album.year">
              {{ album.year }}
            </ng-container>
          </p>
        </div>
      </div>

      <div class="album-body">
        <p class="album-description" *ngIf="album.descriptionKey">
          {{ album.descriptionKey | translate }}
        </p>
        <div class="album-footer">
          <span class="album-count">
            {{ album.photoCount }} {{ 'photography.album.photosLabel' | translate }}
          </span>
          <span class="album-link">
            {{ 'photography.album.view' | translate }}
          </span>
        </div>
      </div>
    </a>
  </div>

  <!-- ALL PHOTOS TITLE + SUBTITLE -->
  <div class="photos-section-header">
    <h2>{{ 'photography.photos.title' | translate }}</h2>
    <p>{{ 'photography.photos.subtitle' | translate }}</p>
  </div>

   <!-- CATEGORY FILTER BAR + INFO TOGGLE -->
  <div class="photo-filter-row" *ngIf="categories.length">
    <div class="photo-filter">
      <button
        class="tag tag--filter"
        [class.tag--filter-active]="!activeCategories.length"
        (click)="clearFilters()"
        type="button"
      >
        {{ 'photography.filter.all' | translate }}
      </button>

      <button
        *ngFor="let cat of categories"
        class="tag tag--filter"
        [class.tag--filter-active]="isCategoryActive(cat)"
        (click)="toggleCategory(cat)"
        type="button"
      >
        {{ cat | translate }}
      </button>
    </div>

    <button
      type="button"
      class="info-toggle"
      (click)="toggleShowInfo()"
    >
      <span class="info-toggle-label">
        {{ showInfo ? ('photography.photos.hideInfo' | translate) : ('photography.photos.showInfo' | translate) }}
      </span>
      <span
        class="info-toggle-switch"
        [class.info-toggle-switch--on]="showInfo"
      >
        <span class="info-toggle-thumb"></span>
      </span>
    </button>
  </div>

   <!-- MASONRY GRID OF ALL PHOTOS -->
  <div class="photo-grid">
    <figure
      *ngFor="let photo of filteredPhotos; index as i"
      class="photo-card"
      (click)="openPhoto(i)"
    >
      <img [src]="photo.src" [alt]="photo.alt" loading="lazy" />

      <figcaption *ngIf="showInfo">
        <div class="caption-main">{{ photo.alt }}</div>
        <div class="caption-sub">
          <span *ngIf="photo.location">{{ photo.location }}</span>
          <span *ngIf="photo.location && photo.year">·</span>
          <span *ngIf="photo.year">{{ photo.year }}</span>
        </div>

        <div class="caption-chips" *ngIf="photo.categories?.length">
          <span
            class="tag tag--category"
            *ngFor="let cat of photo.categories"
          >
            {{ cat | translate }}
          </span>
        </div>
      </figcaption>
    </figure>
  </div>
 <!-- LIGHTBOX -->
  <div
    class="lightbox-backdrop"
    *ngIf="selectedPhoto as photo"
    (click)="closePhoto()"
  >
    <div
      class="lightbox-dialog"
      (click)="$event.stopPropagation()"
      (touchstart)="onTouchStart($event)"
      (touchend)="onTouchEnd($event)"
    >
      <button class="lightbox-close" (click)="closePhoto()">&times;</button>

      <button class="lightbox-arrow left" (click)="prevPhoto()">‹</button>
      <button class="lightbox-arrow right" (click)="nextPhoto()">›</button>

      <div class="lightbox-image-wrapper">
        <img [src]="photo.src" [alt]="photo.alt" />

        <div class="lightbox-meta" *ngIf="showInfo">
          <h2>{{ photo.alt }}</h2>

          <p class="meta-line">
            <ng-container *ngIf="photo.location">
              {{ photo.location }}
            </ng-container>
            <ng-container *ngIf="photo.location && photo.year">
              ·
            </ng-container>
            <ng-container *ngIf="photo.year">
              {{ photo.year }}
            </ng-container>
          </p>

          <div class="meta-chips" *ngIf="photo.categories?.length">
            <span
              class="tag tag--category"
              *ngFor="let cat of photo.categories"
            >
              {{ cat | translate }}
            </span>
          </div>

          <p class="description" *ngIf="photo.description">
            {{ photo.description }}
          </p>
        </div>
      </div>
    </div>
  </div>
</section>